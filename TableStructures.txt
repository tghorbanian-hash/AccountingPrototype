CREATE TABLE IF NOT EXISTS "account_structures" ("use_char" boolean DEFAULT false, "created_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()), "title" character varying NOT NULL, "id" bigint NOT NULL, "code" character varying NOT NULL, "status" boolean DEFAULT true, "group_len" integer DEFAULT 1, "general_len" integer DEFAULT 2, "subsidiary_len" integer DEFAULT 2);
CREATE TABLE IF NOT EXISTS "accounts" ("title" character varying NOT NULL, "full_code" character varying NOT NULL, "nature" character varying, "type" character varying, "created_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()), "metadata" jsonb DEFAULT '{}'::jsonb, "contra_account_id" uuid, "is_active" boolean DEFAULT true, "parent_id" uuid, "structure_id" bigint, "id" uuid NOT NULL DEFAULT gen_random_uuid(), "code" character varying NOT NULL, "level" character varying NOT NULL, "title_en" character varying);
CREATE TABLE IF NOT EXISTS "branches" ("updated_at" timestamp with time zone DEFAULT now(), "created_at" timestamp with time zone DEFAULT now(), "code" character varying NOT NULL, "address" text, "title" character varying NOT NULL, "id" uuid NOT NULL DEFAULT gen_random_uuid(), "is_active" boolean DEFAULT true, "is_default" boolean DEFAULT false);
CREATE TABLE IF NOT EXISTS "cost_centers" ("updated_at" timestamp with time zone DEFAULT now(), "title" character varying NOT NULL, "type" character varying DEFAULT 'production'::character varying, "address" text, "detail_code" character varying, "code" character varying NOT NULL, "id" uuid NOT NULL DEFAULT gen_random_uuid(), "is_active" boolean DEFAULT true, "created_at" timestamp with time zone DEFAULT now());
CREATE TABLE IF NOT EXISTS "currencies" ("created_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()), "is_reciprocal" boolean DEFAULT false, "symbol" character varying, "is_active" boolean DEFAULT true, "method" character varying DEFAULT 'auto'::character varying, "title" character varying NOT NULL, "code" character varying NOT NULL, "decimals" integer DEFAULT 0, "id" bigint NOT NULL);
CREATE TABLE IF NOT EXISTS "currency_globals" ("op_currency" character varying, "rep2_currency" character varying, "id" integer NOT NULL DEFAULT 1, "main_currency" character varying, "rep1_currency" character varying);
CREATE TABLE IF NOT EXISTS "currency_rate_history" ("rate" numeric NOT NULL, "id" bigint NOT NULL, "target_code" character varying, "source_code" character varying, "created_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()));
CREATE TABLE IF NOT EXISTS "currency_rates" ("id" bigint NOT NULL, "source_code" character varying, "rate" numeric NOT NULL, "target_code" character varying);
CREATE TABLE IF NOT EXISTS "detail_instances" ("status" boolean DEFAULT true, "updated_at" timestamp with time zone DEFAULT now(), "id" uuid NOT NULL DEFAULT gen_random_uuid(), "title" character varying NOT NULL, "created_at" timestamp with time zone DEFAULT now(), "detail_code" character varying, "ref_entity_name" character varying, "detail_type_code" character varying, "entity_code" character varying NOT NULL);
CREATE TABLE IF NOT EXISTS "detail_types" ("code" character varying NOT NULL, "created_at" timestamp with time zone DEFAULT now(), "updated_at" timestamp with time zone DEFAULT now(), "type" character varying NOT NULL DEFAULT 'user'::character varying, "title" character varying NOT NULL, "is_active" boolean DEFAULT true, "id" uuid NOT NULL DEFAULT gen_random_uuid());
CREATE TABLE IF NOT EXISTS "doc_types" ("is_active" boolean DEFAULT true, "id" bigint NOT NULL, "description" text, "title" character varying NOT NULL, "type" character varying DEFAULT 'user'::character varying, "code" character varying, "created_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()));
CREATE TABLE IF NOT EXISTS "fiscal_period_exceptions" ("id" bigint NOT NULL, "period_id" bigint, "user_id" uuid NOT NULL, "created_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()), "allowed_statuses" jsonb DEFAULT '["closed", "not_open"]'::jsonb, "user_name" character varying);
CREATE TABLE IF NOT EXISTS "fiscal_periods" ("year_id" bigint, "end_date" date NOT NULL, "start_date" date NOT NULL, "created_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()), "title" character varying NOT NULL, "status" character varying DEFAULT 'open'::character varying, "code" character varying, "id" bigint NOT NULL);
CREATE TABLE IF NOT EXISTS "fiscal_years" ("status" character varying DEFAULT 'open'::character varying, "calendar_type" character varying DEFAULT 'jalali'::character varying, "id" bigint NOT NULL, "start_date" date NOT NULL, "end_date" date NOT NULL, "is_active" boolean DEFAULT true, "created_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()), "title" character varying NOT NULL, "code" character varying);
CREATE TABLE IF NOT EXISTS "ledgers" ("is_main" boolean DEFAULT false, "id" bigint NOT NULL, "currency" character varying DEFAULT 'IRR'::character varying, "title" character varying NOT NULL, "created_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()), "code" character varying NOT NULL, "structure" character varying NOT NULL, "is_active" boolean DEFAULT true);
CREATE TABLE IF NOT EXISTS "org_chart_nodes" ("parent_id" uuid, "created_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()), "code" character varying, "title" character varying NOT NULL, "id" uuid NOT NULL DEFAULT gen_random_uuid(), "chart_id" bigint, "is_active" boolean DEFAULT true);
CREATE TABLE IF NOT EXISTS "org_chart_personnel" ("created_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()), "person_name" character varying, "from_date" date, "id" bigint NOT NULL, "node_id" uuid, "person_id" bigint, "to_date" date);
CREATE TABLE IF NOT EXISTS "org_charts" ("is_active" boolean DEFAULT true, "id" bigint NOT NULL, "start_date" date, "end_date" date, "created_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()), "code" character varying NOT NULL, "title" character varying NOT NULL, "type" character varying DEFAULT 'standard'::character varying);
CREATE TABLE IF NOT EXISTS "organization_info" ("reg_no" character varying, "id" uuid NOT NULL DEFAULT gen_random_uuid(), "updated_at" timestamp with time zone DEFAULT now(), "created_at" timestamp with time zone DEFAULT now(), "name" character varying NOT NULL, "fax" character varying, "addresses" jsonb DEFAULT '[]'::jsonb, "phone" character varying, "code" character varying NOT NULL, "logo" text);
CREATE TABLE IF NOT EXISTS "page_documents" ("page_key" text NOT NULL, "doc_type" text NOT NULL, "updated_at" timestamp with time zone DEFAULT now(), "file_name" text, "updated_by" uuid, "content_type" text, "file_path" text NOT NULL, "id" uuid NOT NULL DEFAULT gen_random_uuid());
CREATE TABLE IF NOT EXISTS "parties" ("national_id" character varying, "id" uuid NOT NULL DEFAULT gen_random_uuid(), "code" character varying NOT NULL, "name" character varying NOT NULL, "party_type" character varying DEFAULT 'person'::character varying, "metadata" jsonb DEFAULT '{}'::jsonb, "phone" character varying, "address" text, "updated_at" timestamp with time zone DEFAULT now(), "is_active" boolean DEFAULT true, "created_at" timestamp with time zone DEFAULT now());
CREATE TABLE IF NOT EXISTS "permissions" ("data_scopes" jsonb DEFAULT '{}'::jsonb, "actions" jsonb DEFAULT '[]'::jsonb, "user_id" uuid, "role_id" uuid, "resource_code" character varying NOT NULL, "id" uuid NOT NULL DEFAULT gen_random_uuid());
CREATE TABLE IF NOT EXISTS "projects" ("is_active" boolean DEFAULT true, "budget" numeric, "name" character varying NOT NULL, "detail_code" character varying, "end_date" date, "start_date" date, "id" bigint NOT NULL, "code" character varying NOT NULL, "manager" character varying, "created_at" timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()));
CREATE TABLE IF NOT EXISTS "resources" ("parent_id" uuid, "title_fa" character varying NOT NULL, "icon_name" character varying DEFAULT 'Circle'::character varying, "type" character varying NOT NULL, "title_en" character varying NOT NULL, "id" uuid NOT NULL DEFAULT gen_random_uuid(), "code" character varying NOT NULL);
CREATE TABLE IF NOT EXISTS "roles" ("id" uuid NOT NULL DEFAULT gen_random_uuid(), "code" character varying NOT NULL, "title" character varying NOT NULL, "description" text, "created_at" timestamp with time zone DEFAULT now(), "is_active" boolean DEFAULT true);
CREATE TABLE IF NOT EXISTS "user_roles" ("user_id" uuid NOT NULL, "role_id" uuid NOT NULL);
CREATE TABLE IF NOT EXISTS "users" ("updated_at" timestamp with time zone DEFAULT now(), "username" character varying NOT NULL, "party_id" uuid, "last_login" character varying DEFAULT '-'::character varying, "email" character varying, "user_type" character varying, "full_name" character varying NOT NULL, "created_at" timestamp with time zone DEFAULT now(), "id" uuid NOT NULL DEFAULT gen_random_uuid(), "is_active" boolean DEFAULT true, "password_hash" text NOT NULL);
